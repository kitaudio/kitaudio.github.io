<!DOCTYPE html>
<html>
  <head>
    <script src='../../scripts/synth/Envelope.js'></script>
    <script>
      window.onload = () => {
        window.audioCtx = new AudioContext();

        var osc = window.audioCtx.createOscillator();
        var gain = window.audioCtx.createGain();
        gain.gain.value = 0.3;

        myEnv = new Envelope();
        console.log(myEnv);
        gain.connect(window.audioCtx.destination);
        myEnv.connect(gain);
        osc.connect(myEnv.input);

        osc.start();

        document.getElementById('executeAttack').onclick = () => { myEnv.executeAttack(); }
        document.getElementById('executeRelease').onclick = () => { myEnv.executeRelease(); }
        document.getElementById('fancyAttack').onclick = () => {
          myEnv.attackEnvelope = [ [1, 1], [1, 0.5], [1, 1], [0.5, 0.1], [1, 1], [4, 0.5]];
          myEnv.executeAttack();
        }
        document.getElementById('fancyRelease').onclick = () => {
          myEnv.releaseEnvelope = [ [1, 1], [1, 0.5], [1, 1], [0.5, 0.1], [1, 1], [4, 0.5]];
          myEnv.executeRelease();
        }
      }
    </script>
    <style>
      body > div:hover {
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id='executeAttack'>execute attack</div>
    <div id='executeRelease'>execute release</div>
    <div id='fancyAttack'>fancy attack</div>
    <div id='fancyRelease'>fancy release</div>
  <body>
</html>
