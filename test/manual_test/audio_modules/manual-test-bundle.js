!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=44)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.min=t.min,this.max=t.max,this.enum=t.enum,this.transform=t.transform}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.constraintMap=[[]],this._parseMap(t,this.constraintMap[0],this.constraintMap)}return i(e,[{key:"constrain",value:function(e){var t=this;t.constraintMap.forEach(function(n){t._constrainBranch(e,n)})}},{key:"_applyConstraint",value:function(e,t,n){return void 0!==t.min&&(e[n]=Math.max(e[n],t.min)),void 0!==t.max&&(e[n]=Math.min(e[n],t.max)),void 0!==t.enum&&t.enum instanceof Array&&(e[n]=void 0!==t.enum.find(e[n])?e[n]:t.enum[0]),void 0!==t.transform&&"function"==typeof t.transform&&(e[n]=t.transform(e[n])),e}},{key:"_parseMap",value:function(e,t,n){var i=this;if(e instanceof Array)t.push("_arr_"),i._parseMap(e[0],t,n);else if(e instanceof Object&&!(e instanceof o.default)){var r=t.map(function(e){return e});Object.keys(e).forEach(function(o,a){if(0===a)t.push(o),i._parseMap(e[o],t,n);else{var s=r.map(function(e){return e});n.push(s),s.push(o),i._parseMap(e[o],s,n)}})}else e instanceof o.default&&t.push(e)}},{key:"_constrainBranch",value:function(e,t){for(var n=void 0,i=t[t.length-1],o=!1,r=0;r<t.length-2&&!o;++r)if("_arr_"===(n=t[r])){o=!0;for(var a=t.slice(r+1,t.length),s=0;s<e.length;++s)this._constrainBranch(e[s],a)}else e=e[n];if(!o)if("_arr_"===(n=t[t.length-2]))for(var u=0;u<e.length;++u)this._applyConstraint(e,i,u);else this._applyConstraint(e,i,n)}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=i(n(9)),a=i(n(10)),s=i(n(11)),u=i(n(12)),c=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t||!(t instanceof Element))throw new Error("widget requires a DOM element specifying its container as the first argument");this.container=t,n=n||{},this.svg=document.createElementNS(this.SVG_NS,"svg"),this.container.appendChild(this.svg),this.svg.setAttribute("width",this.container.getBoundingClientRect().width),this.svg.setAttribute("height",this.container.getBoundingClientRect().height),this.o={},this.svgEls={},this.handlers={},this.state={},this.stateConstraints={},this.observers=[],this._initOptions(n),this._initStateConstraints(),this._initState(),this._initSvgEls(),this._initHandlers()}return o(e,[{key:"_initOptions",value:function(e){}},{key:"_initStateConstraints",value:function(){}},{key:"_initState",value:function(){}},{key:"_initSvgEls",value:function(){}},{key:"_appendSvgEls",value:function(){function e(n){n instanceof Array?n.forEach(function(t){return e(t)}):(t.svg.appendChild(n),n.setAttribute("shape-rendering","geometricPrecision"))}var t=this;Object.values(t.svgEls).forEach(function(t){e(t)})}},{key:"_initHandlers",value:function(){}},{key:"_update",value:function(){}},{key:"getVal",value:function(){}},{key:"setInternalVal",value:function(e){}},{key:"setVal",value:function(e){}},{key:"getState",value:function(){}},{key:"setInternalState",value:function(e){}},{key:"setState",value:function(e){}},{key:"_getRelativeX",value:function(e){return e-this._getLeft()}},{key:"_getRelativeY",value:function(e){return e-this._getTop()}},{key:"_getWidth",value:function(){return this.svg.getBoundingClientRect().width}},{key:"_getHeight",value:function(){return this.svg.getBoundingClientRect().height}},{key:"_getTop",value:function(){return this.svg.getBoundingClientRect().top}},{key:"_getLeft",value:function(){return this.svg.getBoundingClientRect().left}}]),e}();Object.assign(c.prototype,r.default),Object.assign(c.prototype,a.default),Object.assign(c.prototype,s.default),Object.assign(c.prototype,u.default),t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},a=i(n(2)),s=i(n(0)),u=i(n(1)),c=i(n(4)),l=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),o(t,[{key:"getVal",value:function(){return this.state.val}},{key:"setInternalVal",value:function(e){this.setInternalState({val:e})}},{key:"setVal",value:function(e){this.setState({val:e})}},{key:"setOptions",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setOptions",this).call(this,e),this.o.stepPrecision=c.default.getPrecision(this.o.stepInterval)}},{key:"_initOptions",value:function(e){this.o={minVal:0,maxVal:127,stepInterval:1,needleColor:"#414141",activeColor:"#f40",mouseSensitivity:1.2},r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initOptions",this).call(this,e),this.o.stepPrecision=c.default.getPrecision(this.o.stepInterval)}},{key:"_initStateConstraints",value:function(){var e=this;this.stateConstraints=new u.default({val:new s.default({min:e.o.minVal,max:e.o.maxVal,transform:function(t){return c.default.quantize(t,e.o.stepInterval,e.o.stepPrecision)}})})}},{key:"_initState",value:function(){this.state={val:0}}},{key:"_initSvgEls",value:function(){this.svgEls={bgArc:document.createElementNS(this.SVG_NS,"path"),activeArc:document.createElementNS(this.SVG_NS,"path"),needle:document.createElementNS(this.SVG_NS,"line")},this.svgEls.bgArc.setAttribute("d",this._calcSvgArcPath(this._calcNeedleCenter().x,this._calcNeedleCenter().y,this._calcDialRadius(),.67*Math.PI,2.35*Math.PI)),this.svgEls.bgArc.setAttribute("stroke-width",this._calcArcStrokeWidth()),this.svgEls.bgArc.setAttribute("stroke",this.o.needleColor),this.svgEls.bgArc.setAttribute("fill","transparent"),this.svgEls.bgArc.setAttribute("stroke-linecap","round"),this.svgEls.activeArc.setAttribute("stroke-width",this._calcArcStrokeWidth()),this.svgEls.activeArc.setAttribute("stroke",this.o.activeColor),this.svgEls.activeArc.setAttribute("fill","transparent"),this.svgEls.activeArc.setAttribute("stroke-linecap","round"),this.svgEls.needle.setAttribute("x1",this._calcNeedleCenter().x),this.svgEls.needle.setAttribute("y1",this._calcNeedleCenter().y),this.svgEls.needle.setAttribute("x2",this._calcNeedleEnd().x),this.svgEls.needle.setAttribute("y2",this._calcNeedleEnd().y),this.svgEls.needle.setAttribute("stroke-width",this._calcNeedleWidth()),this.svgEls.needle.setAttribute("stroke",this.o.needleColor),this.svgEls.needle.setAttribute("z-index","1000"),this.svgEls.needle.setAttribute("stroke-linecap","round"),this._appendSvgEls(),this._update()}},{key:"_initHandlers",value:function(){var e=this,t=0,n=0,i=e.getState().val;this.handlers={touch:function(n){t=n.clientY,document.addEventListener("mousemove",e.handlers.move),document.addEventListener("touchmove",e.handlers.move),document.addEventListener("mouseup",e.handlers.release),document.addEventListener("touchend",e.handlers.release)},move:function(o){o.preventDefault(),n=t-o.clientY,t=o.clientY,i=e.state.val+n*e.o.mouseSensitivity*e._calcMovePrecision(),i=Math.max(i,e.o.minVal),i=Math.min(i,e.o.maxVal),e.setState({val:i})},release:function(){document.removeEventListener("mousemove",e.handlers.move),document.removeEventListener("touchmove",e.handlers.move)}},this.svg.addEventListener("mousedown",e.handlers.touch),this.svg.addEventListener("touchstart",e.handlers.touch)}},{key:"_update",value:function(){this.svgEls.needle.setAttribute("x1",this._calcNeedleCenter().x),this.svgEls.needle.setAttribute("y1",this._calcNeedleCenter().y),this.svgEls.needle.setAttribute("x2",this._calcNeedleEnd().x),this.svgEls.needle.setAttribute("y2",this._calcNeedleEnd().y),this.svgEls.activeArc.setAttribute("d",this._calcSvgArcPath(this._calcNeedleCenter().x,this._calcNeedleCenter().y,this._calcDialRadius(),.65*Math.PI,this._calcNeedleAngle()-.5*Math.PI)),this.state.val===this.o.minVal?this.svgEls.activeArc.setAttribute("stroke",this.o.needleColor):this.svgEls.activeArc.setAttribute("stroke",this.o.activeColor)}},{key:"_calcArcStrokeWidth",value:function(){return this._calcDialRadius()/5}},{key:"_calcDialRadius",value:function(){var e=Math.min(this._getWidth(),this._getHeight())/2*.89;return e=Math.trunc(e)}},{key:"_calcNeedleAngle",value:function(){return this.o.maxVal-this.o.minVal!=0?(this.state.val-this.o.minVal)/(this.o.maxVal-this.o.minVal)*(1.7*Math.PI)+1.15*Math.PI:1.7*Math.PI*.5+1.15*Math.PI}},{key:"_calcNeedleCenter",value:function(){return{x:Math.trunc(this._getWidth()/2),y:Math.trunc(this._getHeight()/2)}}},{key:"_calcNeedleEnd",value:function(){return{x:this._calcNeedleCenter().x+Math.sin(this._calcNeedleAngle())*this._calcDialRadius(),y:this._calcNeedleCenter().y-Math.cos(this._calcNeedleAngle())*this._calcDialRadius()}}},{key:"_calcNeedleWidth",value:function(){return this._calcDialRadius()/5}},{key:"_calcSvgArcPath",value:function(e,t,n,i,o){var r=e+n*Math.cos(i),a=t+n*Math.sin(i),s=e+n*Math.cos(o),u=t+n*Math.sin(o);return["M",r,a,"A",n,n,0,o-i<Math.PI?0:1,(Math.PI,1),s,u].join(" ")}},{key:"_calcMovePrecision",value:function(){return(this.o.maxVal-this.o.minVal)/127}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={getPrecision:function(e){var t=(""+e).split(".")[1];return t?t.length:0},round:function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},quantize:function(e,t,n){var o=void 0;return 0==t?0:(t<0&&(t=Math.abs(t)),o=~~(e/t)*t,o=Math.abs(e-o)>t/2?o>0?o+t:o-t:o,void 0!==n&&(o=i.round(o,n)),o)},q:function(e,t,n){return i.quantize(e,t,n)}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={midiToFreq:function(e,t){t=t||440;var n=-1;return-1!==e&&(n=440*Math.pow(2,(e-69)/12)),n},noteNameToMidi:function(e){var t=/^([a-g]|[A-G])(#|b)?([0-9]|10)$/;if(!1===t.test(e))return console.log("AudioModuleUtil.noteNameToMidi: invalid note name format"),-1;var n=t.exec(e),i=n[1],o=n[2],r=n[3],a={A:9,a:9,B:11,b:11,C:0,c:0,D:2,d:2,E:4,e:4,F:5,f:5,G:7,g:7}[i];"#"===o?a++:"b"===o&&a--;return a+12*r},noteNameToFreq:function(e,t){return t=t||440,i.midiToFreq(i.noteNameToMidi(e),t)}};t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(i(n(5)),i(n(15))),a=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioCtx=t,this.isAudioModule=!0,"function"!=typeof this.audioCtx.webAudioConnect&&(0,r.default)(this.audioCtx),this.input=t.createGain(),this.output=t.createGain(),this.audioComponents={},this._initAudioComponents()}return o(e,[{key:"_initAudioComponents",value:function(){}},{key:"getContext",value:function(){return this.audioCtx}},{key:"connect",value:function(e,t,n){!0===e.isAudioModule?this.output.connect(e._input):this.output.connect(e)}},{key:"disconnect",value:function(e,t,n){!0===e.isAudioModule?this.output.disconnect(e._audioModuleInput):this.output.disconnect(e)}}]),e}();t.default=a},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={SVG_NS:"http://www.w3.org/2000/svg"}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});i(n(0)),i(n(1));var o={getState:function(){return Object.assign({},this.state)},setInternalState:function(e){var t=this,n=!1;return e=e||this.getState(),Object.keys(e).forEach(function(i){t.state.hasOwnProperty(i)&&t.state[i]!==e[i]&&(t.state[i]=e[i],n=!0)}),t.stateConstraints.constrain(t.state),this._update(),n},setState:function(e){var t=!1;return t=this.setInternalState(e),this._notifyObservers(),t}};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={_initOptions:function(e){var t=this;e=e||{},Object.keys(e).forEach(function(n){t.o.hasOwnProperty(n)&&t.o[n]!==e[n]&&(t.o[n]=e[n])})},getOptions:function(){return Object.assign({},this.o)},setOptions:function(e){var t=this;e=e||{};var n=!1;return Object.keys(e).forEach(function(i){t.o.hasOwnProperty(i)&&t.o[i]!==e[i]&&(t.o[i]=e[i],n=!0)}),n&&this.setState(),n}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={addObserver:function(e){var t=!1;return this.observers.find(function(t){return t===e})||(this.observers.push(e),t=!0),t},removeObserver:function(e){var t=this,n=!1;return this.observers.forEach(function(i,o){i===e&&(t.observers.splice(o,1),n=!0)}),n},_notifyObservers:function(){var e=this;this.observers.forEach(function(t){return t(e.getVal())})}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.getPrototypeOf(Object.getPrototypeOf(e.createGain()));t.webAudioConnect=t.connect,t.webAudioDisconnect=t.disconnect,t.connect=function(e,t,n){!0===e.isAudioModule?this.webAudioConnect(e.input,t,n):this.webAudioConnect(e,t,n)},t.disconnect=function(e,t,n){!0===e.isAudioModule?this.webAudioDisconnect(e.input,t,n):this.webAudioDisconnect(e,t,n)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}i(n(6));var o=i(n(45)),r=i(n(3)),a=new AudioContext,s=a.destination;!function(){a.createStereoPanner=function(){return new o.default(a)};var e=a.createStereoPanner(),t=a.createOscillator(),n=a.createGain();t.connect(e),e.connect(n),n.connect(s),n.gain.value=0,t.frequency.value=220,t.start();new r.default(document.getElementById("pan-dial"),{minVal:-1,maxVal:1,stepInterval:.01}).addObserver(function(t){e.pan.value=t}),document.getElementById("stereo-panner-audio-toggle").addEventListener("change",function(e){e.target.checked?n.gain.value=.5:n.gain.value=0})}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=i(n(6)),a=i(n(46)),s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=n;return function e(t){i.pan=new Number(t),Object.defineProperty(i.pan,"value",{set:function(t){t=(t=t>1?1:t)<-1?-1:t,i.audioComponents.gainL.gain.value=-t/2+.5,i.audioComponents.gainR.gain.value=t/2+.5,e(t)}})}(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),o(t,[{key:"_initAudioComponents",value:function(){try{(0,a.default)(this.audioCtx,["Gain","ChannelMerger"]),this.audioComponents={gainL:this.audioCtx.createGain(),gainR:this.audioCtx.createGain(),merger:this.audioCtx.createChannelMerger(2)},this.input.connect(this.audioComponents.gainL),this.input.connect(this.audioComponents.gainR),this.audioComponents.gainL.connect(this.audioComponents.merger,0,0),this.audioComponents.gainR.connect(this.audioComponents.merger,0,1),this.audioComponents.merger.connect(this.output)}catch(e){console.error(e)}}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t.forEach(function(t){switch(t){case"Analyser":if("function"!=typeof e.createAnalyser)throw new Error("Required module AnalyserNode is not available in provided Audio Context and could not be shimmed.");break;case"AudioBuffer":if("function"!=typeof e.createBuffer)throw new Error("Required module AudioBufferNode is not available in provided Audio Context and could not be shimmed.");break;case"AudioBufferSource":if("function"!=typeof e.createBufferSource)throw new Error("Required module AudioBufferSourceNode is not available in provided Audio Context and could not be shimmed.");break;case"BiquadFilter":if("function"!=typeof e.createBiquadFilter)throw new Error("Required module BiquadFilterNode is not available in provided Audio Context and could not be shimmed.");break;case"ChannelMerger":if("function"!=typeof e.createChannelMerger)throw new Error("Required module ChannelMergerNode is not available in provided Audio Context and could not be shimmed.");break;case"ChannelSplitter":if("function"!=typeof e.createChannelSplitter)throw new Error("Required module ChannelSplitterNode is not available in provided Audio Context and could not be shimmed.");break;case"Convolver":if("function"!=typeof e.createConvolver)throw new Error("Required module ConvolverNode is not available in provided Audio Context and could not be shimmed.");break;case"Delay":if("function"!=typeof e.createDelay)throw new Error("Required module DelayNode is not available in provided Audio Context and could not be shimmed.");break;case"DynamicsCompressor":if("function"!=typeof e.createDynamicsCompressor)throw new Error("Required module DynamicsCompressorNode is not available in provided Audio Context and could not be shimmed.");break;case"Gain":if("function"!=typeof e.createGain)throw new Error("Required module GainNode is not available in provided Audio Context and could not be shimmed.");break;case"IIRFilter":if("function"!=typeof e.createIIRFilter)throw new Error("Required module IIRFilterNode is not available in provided Audio Context and could not be shimmed.");break;case"Oscillator":if("function"!=typeof e.createOscillator)throw new Error("Required module OscillatorNode is not available in provided Audio Context and could not be shimmed.");break;case"Panner":if("function"!=typeof e.createPannerr)throw new Error("Required module PannerNode is not available in provided Audio Context and could not be shimmed.");break;case"StereoPanner":"function"!=typeof e.createStereoPanner&&(e.createStereoPanner=function(){return new StereoPannerShim(e)});break;default:console.warn("A check for AudioContext feature ",t,"is being requested, but no matching check is implemented")}})}}]);